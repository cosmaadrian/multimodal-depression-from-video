#!/bin/bash

set -e
cd ..

WANDB_MODE=run
BATCH_SIZE=8
EPOCHS=200
SECONDS_PER_WINDOW=6

GROUP=hope-baseline-edaic-modalities-big-arch
A_MODALITIES="edaic_audio_mfcc edaic_audio_egemaps"
V_MODALITIES="edaic_video_cnn_resnet edaic_video_pose_gaze_aus"
AV_MODALITIES="edaic_audio_mfcc edaic_audio_egemaps edaic_video_cnn_resnet edaic_video_pose_gaze_aus"

## TRAINING ##

python main.py --run_id 1 --name audio-run-1 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $A_MODALITIES
python main.py --run_id 2 --name audio-run-2 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $A_MODALITIES
python main.py --run_id 3 --name audio-run-3 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $A_MODALITIES
python main.py --run_id 4 --name audio-run-4 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $A_MODALITIES
python main.py --run_id 5 --name audio-run-5 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $A_MODALITIES

python main.py --run_id 1 --name video-run-1 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $V_MODALITIES
python main.py --run_id 2 --name video-run-2 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $V_MODALITIES
python main.py --run_id 3 --name video-run-3 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $V_MODALITIES
python main.py --run_id 4 --name video-run-4 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $V_MODALITIES
python main.py --run_id 5 --name video-run-5 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE  --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $V_MODALITIES

python main.py --run_id 1 --name audiovisual-run-1 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $AV_MODALITIES
python main.py --run_id 2 --name audiovisual-run-2 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $AV_MODALITIES
python main.py --run_id 3 --name audiovisual-run-3 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $AV_MODALITIES
python main.py --run_id 4 --name audiovisual-run-4 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $AV_MODALITIES
python main.py --run_id 5 --name audiovisual-run-5 --model_args.num_layers 8 --model_args.self_attn_num_heads 8 --model_args.self_attn_dim_head 32 --save_model 1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --scheduler cosine --group $GROUP --mode $WANDB_MODE  --epochs $EPOCHS --batch_size $BATCH_SIZE --scheduler_args.max_lr 0.0001 --scheduler_args.end_epoch $EPOCHS --config_file configs/edaic_config.yaml --dataset e-daic-woz --env banamar-upv16 --use_modalities $AV_MODALITIES

## EVALUATION ##
# EVALUATING ON TEST SET
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-2 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-3 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-4 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-5 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16

python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-2 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-3 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-4 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-5 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16

python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-2 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-3 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-4 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_test_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-5 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16


# EVALUATING ON VALIDATION SET
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-2 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-3 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-4 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audio-run-5 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16

python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-2 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-3 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-4 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name video-run-5 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16

python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-1 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-2 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-3 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-4 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
python evaluate.py --eval_config  configs/eval_configs/eval_edaic_val_config.yaml --output_dir $GROUP --checkpoint_kind best --name audiovisual-run-5 --n_temporal_windows 1 --seconds_per_window $SECONDS_PER_WINDOW --batch_size $BATCH_SIZE --group $GROUP --env banamar-upv16
